cbuffer UBO : register(b0)
{
    float deltaTime;
};

struct Particle
{
    float3 position;float pad1;
    float3 velocity;float pad2;
    float4 color;
};

StructuredBuffer<Particle> inputParticles : register(t1);

RWStructuredBuffer<Particle> outputParticles : register(u2);

[numthreads(64, 1, 1)]
void CSMain(uint3 DTid : SV_DispatchThreadID)
{
    uint idx = DTid.x;

    Particle p = inputParticles[idx];

    p.position.xyz += p.velocity.xyz * deltaTime;

    outputParticles[idx] = p;
}
